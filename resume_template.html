<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Resume</title>
    <style>
        /* Global Reset to prevent unexpected offsets in xhtml2pdf */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        @page {
            size: a4 portrait;
            margin: 1.5cm; /* Slightly more margin for a cleaner print look */
        }
        
        body {
            font-family: Helvetica, Arial, sans-serif;
            color: #333;
            line-height: 1.4;
            font-size: 10.5pt; /* Slightly smaller for better fit */
        }

        /* --- TYPOGRAPHY --- */
        h1 {
            color: #512da8;
            font-size: 24pt;
            text-transform: uppercase;
            margin-bottom: 5pt;
        }
        .summary {
            font-size: 10.5pt;
            margin-bottom: 25pt;
            line-height: 1.3;
            color: #444;
        }
        h2 {
            color: #512da8;
            font-size: 12pt;
            margin-top: 20pt;    /* Default top margin for most h2s */
            margin-bottom: 8pt;
            padding-bottom: 3pt;
            text-transform: uppercase;
            border-bottom: 1.5px solid #ddd;
            letter-spacing: 0.5pt;
        }
        
        /* Specific classes to remove top margin for the first h2 in each column */
        .first-h2 {
            margin-top: 0pt;
        }

        /* --- MAIN LAYOUT TABLE --- */
        table.main-layout {
            width: 100%;
            border-collapse: collapse;
        }
        td.left-col {
            width: 65%;           /* Adjusted for better balance */
            vertical-align: top;
            padding-right: 15pt;  /* Explicit space between columns */
        }
        td.right-col {
            width: 35%;
            vertical-align: top;
            padding-left: 15pt;   /* Added padding on this side too */
            border-left: 1px solid #eee; /* Optional: subtle divider line */
        }

        /* --- JOB/PROJECT ITEMS --- */
        .job-block, .project-block {
            margin-bottom: 12pt;
            page-break-inside: avoid; /* Try to keep job entries together on one page */
        }
        table.job-table {
            width: 100%;
            margin-bottom: 2pt;
        }
        td.job-company { 
            font-weight: bold; 
            font-size: 11pt;
            color: #222;
        }
        td.job-dates { 
            text-align: right; 
            font-size: 10pt;
            color: #666;
        }
        td.job-title { 
            font-style: italic; 
            color: #444;
            font-size: 10.5pt;
        }
        td.job-location { 
            text-align: right; 
            font-style: italic; 
            color: #666;
            font-size: 10pt;
        }

        /* LISTS */
        ul {
            margin-top: 4pt;
            padding-left: 12pt;
        }
        li {
            margin-bottom: 3pt;
            font-size: 10pt;
            color: #444;
            line-height: 1.3;
        }

        /* --- RIGHT COLUMN SPECIFIC --- */
        .contact-section { margin-bottom: 20pt; }
        .contact-item { 
            margin-bottom: 4pt; 
            font-size: 10pt;
            color: #444;
        }

        .skill-block { margin-bottom: 15pt; }
        .skill-category { 
            font-weight: bold; 
            font-size: 10.5pt; 
            color: #333; 
            margin-bottom: 2pt;
        }
        .right-col ul {
            margin-top: 0;
            padding-left: 10pt;
        }

        .edu-block {
            margin-bottom: 12pt;
        }
        .edu-inst { font-weight: bold; font-size: 10.5pt; color: #222; }
        .edu-deg { font-style: italic; font-size: 10pt; margin-bottom: 2pt; }
        .edu-meta { font-size: 10pt; color: #666; }

    </style>
</head>
<body>
    <!-- HEADER -->
    <h1>{{ name }}</h1>
    <!-- <div class="summary">{{ summary }}</div> -->

    <!-- MAIN LAYOUT TABLE -->
    <!-- cellpadding/cellspacing=0 is CRUCIAL for xhtml2pdf exact layouts -->
    <table class="main-layout" cellpadding="0" cellspacing="0">
        <tr>
            <!-- LEFT COLUMN -->
            <td class="left-col">
                <h2 class="first-h2">Work Experience</h2>
                {% for job in work_experience %}
                <div class="job-block">
                    <table class="job-table" cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="job-company">{{ job.company }}</td>
                            <td class="job-dates">{{ job.dates }}</td>
                        </tr>
                        <tr>
                            <td class="job-title">{{ job.title }}</td>
                            <td class="job-location">{{ job.location }}</td>
                        </tr>
                    </table>
                    <ul>
                        {% for detail in job.details %}
                        <li>{{ detail }}</li>
                        {% endfor %}
                    </ul>
                </div>
                {% endfor %}

                <h2>Projects</h2>
                {% for project in projects %}
                <div class="project-block">
                    <div style="font-weight: bold; font-size: 11pt; color: #222;">
                        {{ project.name }}
                    </div>
                    <div style="font-style: italic; font-size: 10pt; color: #555; margin-bottom: 4pt;">
                        {{ project.technologies }}
                    </div>
                    <ul>
                        {% for detail in project.details %}
                        <li>{{ detail }}</li>
                        {% endfor %}
                    </ul>
                </div>
                {% endfor %}
            </td>

            <!-- RIGHT COLUMN -->
            <td class="right-col">
                <div class="contact-section">
                    <h2 class="first-h2">Contact</h2>
                    <div class="contact-item">{{ contact.phone }}</div>
                    <div class="contact-item">{{ contact.email }}</div>
                    <!-- Trimming https:// for cleaner print look, optional -->
                    <div class="contact-item">{{ contact.linkedin|replace('https://', '')|replace('www.', '') }}</div>
                    <div class="contact-item">{{ contact.github|replace('https://', '')|replace('www.', '') }}</div>
                </div>

                <h2>Skills</h2>
                {% for category, skills_list in skills.items() %}
                <div class="skill-block">
                    <div class="skill-category">{{ category }}</div>
                    <ul>
                        {% for skill in skills_list %}
                        <li>{{ skill }}</li>
                        {% endfor %}
                    </ul>
                </div>
                {% endfor %}

                <h2>Education</h2>
                {% for edu in education %}
                <div class="edu-block">
                    <div class="edu-inst">{{ edu.institution }}</div>
                    <div class="edu-deg">{{ edu.degree }}</div>
                    <div class="edu-meta">{{ edu.location }}</div>
                    <div class="edu-meta">{{ edu.dates }}</div>
                </div>
                {% endfor %}
            </td>
        </tr>
    </table>
</body>
</html>